<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ç”Ÿæ—¥å¿«æ¨‚</title>
  <style>
    :root { color-scheme: light dark; }
    body { margin:0; height:100dvh; display:grid; place-items:center; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial; }
    .wrap { text-align:center; padding:24px; }
    h1 { font-size: clamp(32px, 6vw, 64px); margin: 0 0 12px; }
    p { margin: 0 0 24px; opacity:.8; }
    button { padding:12px 18px; border-radius:12px; border:0; font-size:16px; cursor:pointer; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ç”Ÿæ—¥å¿«æ¨‚ ğŸ‚</h1>
    <p>1 ç§’å¾Œç‚ºä½ é–‹å•Ÿ Appï¼ˆè‹¥æœªæˆåŠŸï¼Œè«‹é»ä¸‹æ–¹æŒ‰éˆ•ï¼‰ã€‚</p>
    <button id="openBtn">ç«‹åˆ»é–‹å•Ÿ</button>
  </div>

  <script>
    // ===== ç›®æ¨™ï¼šline æˆ– gameï¼ˆAndroidï¼šcom.example.isarappï¼‰=====
    const TARGET = "line"; // æƒ³é–‹å•Ÿä½ çš„éŠæˆ²å°±æ”¹æˆ "game"

    // ===== çµ±ä¸€è¨­å®šï¼ˆå¯è‡ªè¡Œèª¿æ•´ï¼‰=====
    const DELAY_MS = 1000;   // é¡¯ç¤ºã€Œç”Ÿæ—¥å¿«æ¨‚ã€å¾Œå»¶é²æ™‚é–“
    const FALLBACK_MS = 800; // å˜—è©¦æ‰“é–‹å¾Œï¼Œå¤šä¹…åˆ¤å®šå¤±æ•—è½‰å‚™æ´

    // App ç›®æ¨™è³‡è¨Š
    const APPS = {
      line: {
        iosScheme: 'line://',
        androidScheme: 'line://',
        androidIntent: 'intent://#Intent;scheme=line;package=jp.naver.line.android;end',
        iosStore: 'https://apps.apple.com/app/line/id443904275',
        androidStore: 'market://details?id=jp.naver.line.android'
      },
      game: {
        // ä½ çš„éŠæˆ²ï¼ˆè«‹ä¾å¯¦éš›æƒ…æ³èª¿æ•´ scheme / store é€£çµï¼‰
        iosScheme: 'isarapp://home', // è‹¥ iOS æœ‰è‡ªå®šç¾© schemeï¼Œå¡«é€™å€‹ï¼›æ²’æœ‰å°±åªç•¶ Android ç”¨
        androidScheme: 'isarapp://home',
        androidIntent: 'intent://home#Intent;scheme=isarapp;package=com.example.isarapp;end',
        iosStore: 'https://apps.apple.com/app/id1234567890', // è‹¥ä¸Šæ¶ App Storeï¼Œå¡«çœŸå¯¦é€£çµ
        androidStore: 'market://details?id=com.example.isarapp' // Play å•†åº—å‚™æ´
      }
    };

    // è£ç½®åˆ¤æ–·
    const ua = navigator.userAgent || '';
    const isAndroid = /Android/i.test(ua);
    const isIOS = /iPhone|iPad|iPod/i.test(ua);

    function openApp(targetKey) {
      const cfg = APPS[targetKey];
      if (!cfg) return;
      const start = Date.now();

      function go(url){ window.location.href = url; }

      if (isAndroid) {
        try { go(cfg.androidIntent); } catch(e) { go(cfg.androidScheme); }
        setTimeout(() => {
          // è‹¥æœªè¢«å¸¶èµ°ï¼Œå°å‘å•†åº—ï¼ˆå¯æ”¹æˆä½ æƒ³è¦çš„ä¸‹è¼‰é ï¼‰
          if (Date.now() - start < 1800) go(cfg.androidStore);
        }, FALLBACK_MS);
        return;
      }

      if (isIOS) {
        // iOS å¸¸éœ€è¦ä½¿ç”¨è€…æ‰‹å‹¢ï¼›ä»å˜—è©¦ä¸€æ¬¡è‡ªå‹•æ‰“é–‹
        go(cfg.iosScheme);
        setTimeout(() => {
          if (Date.now() - start < 1800) go(cfg.iosStore);
        }, FALLBACK_MS);
        return;
      }

      alert('è«‹ç”¨æ‰‹æ©Ÿé–‹å•Ÿé€™å€‹é é¢ä»¥å•Ÿå‹• Appã€‚');
    }

    // 1 ç§’å¾Œè‡ªå‹•é–‹å•Ÿ
    const run = () => openApp(TARGET);
    setTimeout(run, DELAY_MS);

    // æ‰‹å‹•å‚™æ´æŒ‰éˆ•ï¼ˆiOS ä¸Šæ›´ç©©ï¼‰
    document.getElementById('openBtn').addEventListener('click', run);
  </script>
</body>
</html>
